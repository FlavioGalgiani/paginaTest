<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Comunicazione LEA</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 40px;
      background: #ffffff;
      color: #000;
    }
    .container {
      max-width: 1024px;
      margin: 0 auto;
    }
    .header {
      border-bottom: 4px solid #0097a9;
      padding-bottom: 30px;
      margin-bottom: 20px;
    }
    .header-inner {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      position: relative;
    }
    .logo {
      width: 160px;
      margin-top: 20px;
    }
    .logo img {
      width: 100%;
      height: auto;
      display: block;
    }
    .language-switcher {
      position: absolute;
      top: 0;
      right: 0;
      transform: translateY(30px);
    }
    .language-switcher button {
      background-color: #0097a9;
      color: white;
      border: none;
      margin-left: 5px;
      padding: 4px 8px;
      font-size: 9pt;
      border-radius: 3px;
      cursor: pointer;
    }
    .language-switcher button:hover {
      background-color: #007c8a;
    }
    .header-date {
      font-size: 10pt;
      margin-bottom: -15px;
    }
    .main-content {
      display: flex;
      margin-top: 10px;
    }
    .title-label {
      width: 240px;
      font-weight: bold;
      color: #0097a9;
      font-size: 12pt;
      line-height: 1.4;
      padding-top: 0;
    }
    .right-content {
      flex: 1;
    }
    .title-text {
      font-size: 11pt;
      line-height: 1.5;
      padding-top: 0;
      max-width: 760px;
    }
    .date-box {
      background-color: #b6dee5;
      padding: 30px;
      text-align: center;
      width: 600px;
      font-size: 12pt;
      font-weight: normal;
      border-radius: 4px;
      margin-top: 4px;
    }
    .date-box.compact {
    padding: 20px;
    }
    .date-line {
      margin: 0;
      line-height: 1.5;
    }
    .date-line strong {
      font-size: 13pt;
      font-weight: bold;
    }
    .divider {
      border-bottom: 4px solid #0097a9;
      margin-bottom: 10px;
      margin-top: 25px;
    }
    .section-title {
      font-weight: bold;
      color: #0097a9;
      font-size: 12pt;
      margin-bottom: 10px;
    }
    .disclaimer {
      font-size: 11pt;
      line-height: 1.6;
      margin-top: 30px;
      padding-left: 240px;
      padding-right: 0;
      box-sizing: border-box;
      text-align: justify;
    }
    .boxes-container {
      display: flex;
      margin-top: 10px;
    }
    .boxes-label {
      width: 240px;
    }
    .boxes-wrapper {
      flex: 1;
    }
    .boxes-wrapper > p {
      margin-top: 0;
      font-size: 11pt;
    }
    .boxes {
      display: flex;
      justify-content: space-evenly;
      margin-top: 12px;
    }
    .box {
      background-color: #eeeeee;
      padding: 20px;
      width: 31%;
      font-size: 11pt;
      text-align: center;
      box-sizing: border-box;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100px;
    }
    .footer {
      font-size: 9pt;
      color: #0097a9;
      margin-top: 60px;
      padding-top: 10px;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      flex-wrap: wrap;
    }
    .footer > div {
      width: 25%;
      text-align: left;
    }
    .footer .right {
      text-align: right;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="header-inner">
        <div class="logo">
          <img src="https://raw.githubusercontent.com/FlavioGalgiani/paginaTest/main/LEA-Logo.jpg" alt="LEA Logo">
        </div>
        <div class="language-switcher">
          <button onclick="setLanguage('it')">IT</button>
          <button onclick="setLanguage('fr')">FR</button>
          <button onclick="setLanguage('de')">DE</button>
          <button onclick="setLanguage('en')">EN</button>
        </div>
        <div class="header-date" id="intestazione">Locarno, [DATA]</div>
      </div>
    </div>

    <div class="main-content">
      <div class="title-label" id="label-title">Sospensione<br>erogazione acqua<br>potabile</div>
      <div class="right-content">
        <div class="title-text" id="text-intro">
          A seguito di lavori sulla rete di distribuzione verrà <strong>sospesa l’erogazione di acqua potabile</strong> il giorno:
        </div>
        <div class="date-box" id="riquadro">
          <!-- Dati dinamici -->
        </div>
      </div>
    </div>

    <div class="divider"></div>
    <div class="boxes-container">
      <div class="boxes-label">
        <div class="section-title" id="label-section">Disposizioni</div>
      </div>
      <div class="boxes-wrapper">
        <p id="text-box-intro">Prima della sospensione dell’acqua potabile, si invita l’utenza a voler osservare le seguenti disposizioni:</p>
        <div class="boxes">
          <div class="box" id="box1">Stoccare dell’acqua per eventuali urgenze</div>
          <div class="box" id="box2">Chiudere i rubinetti d’entrata principali</div>
          <div class="box" id="box3">Disinserire eventuali apparecchi alimentati con acqua potabile (lavastovigli, lavatrici, ecc)</div>
        </div>
      </div>
    </div>

    <div class="disclaimer">
      <span id="text-disclaimer">
        Al termine della sospensione aprire lentamente i rubinetti principali (es. vasca da bagno, giardini, etc.) ed in seguito i rubinetti d’erogazione interni. Questa procedura eliminerà l’aria ed eventuali intorbidimenti che potrebbero presentarsi. Non da ultimo si consiglia la verifica del filtro in entrata (se presente) e dei “Neoperl” (aeratore-filtro sul rubinetto).
      </span><br><br>
      <strong id="text-thanks">Ringraziamo l’utenza per la comprensione e la collaborazione.</strong>
    </div>

    <div class="footer">
      <div style="width: 32%;">
        <strong>Locarnese Ente Acqua</strong><br>
        Piazza Grande 3, Casella postale, 6601 Locarno
      </div>
      <div style="text-align: left; width: 23%;">
        T +41 91 601 83 00
      </div>
      <div style="text-align: left; width: 20%;">
        <a href="mailto:info@lea-ti.ch">info@lea-ti.ch</a>
      </div>
      <div class="right" style="width: 25%;">
        <a href="https://www.lea-ti.ch">lea-ti.ch</a>
      </div>
    </div>
  </div>
  <script>
  const translations = {
    it: {
      months: {
        gennaio: "gennaio", febbraio: "febbraio", marzo: "marzo", aprile: "aprile",
        maggio: "maggio", giugno: "giugno", luglio: "luglio", agosto: "agosto",
        settembre: "settembre", ottobre: "ottobre", novembre: "novembre", dicembre: "dicembre"
      },
      days: {
        LUNEDI: "LUNEDÌ", MARTEDI: "MARTEDÌ", MERCOLEDI: "MERCOLEDÌ",
        GIOVEDI: "GIOVEDÌ", VENERDI: "VENERDÌ", SABATO: "SABATO", DOMENICA: "DOMENICA"
      },
      timePrefix: "dalle",
      timeTo: "alle",

      riservaPrefix: "quale riserva",
      riservaFrom: "dalle",
      riservaTo: "alle",

      labelTitle: "Sospensione<br>erogazione acqua<br>potabile",
      textIntro: "A seguito di lavori sulla rete di distribuzione verrà <strong>sospesa l’erogazione di acqua potabile</strong> il giorno:",
      labelSection: "Disposizioni",
      textBoxIntro: "Prima della sospensione dell’acqua potabile, si invita l’utenza a voler osservare le seguenti disposizioni:",
      box1: "Stoccare dell’acqua per eventuali urgenze",
      box2: "Chiudere i rubinetti d’entrata principali",
      box3: "Disinserire eventuali apparecchi alimentati con acqua potabile (lavastovigli, lavatrici, ecc)",
      disclaimer: "Al termine della sospensione aprire lentamente i rubinetti principali (es. vasca da bagno, giardini, etc.) ed in seguito i rubinetti d’erogazione interni. Questa procedura eliminerà l’aria ed eventuali intorbidimenti che potrebbero presentarsi. Non da ultimo si consiglia la verifica del filtro in entrata (se presente) e dei “Neoperl” (aeratore-filtro sul rubinetto).",
      thanks: "Ringraziamo l’utenza per la comprensione e la collaborazione."
    },
    fr: {
      months: {
        gennaio: "janvier", febbraio: "février", marzo: "mars", aprile: "avril",
        maggio: "mai", giugno: "juin", luglio: "juillet", agosto: "août",
        settembre: "septembre", ottobre: "octobre", novembre: "novembre", dicembre: "décembre"
      },
      days: {
        LUNEDI: "LUNDI", MARTEDI: "MARDI", MERCOLEDI: "MERCREDI",
        GIOVEDI: "JEUDI", VENERDI: "VENDREDI", SABATO: "SAMEDI", DOMENICA: "DIMANCHE"
      },
      timePrefix: "de",
      timeTo: "à",

      riservaPrefix: "réserve éventuelle",
      riservaFrom: "de",
      riservaTo: "à",
      
      labelTitle: "Suspension<br>de l'alimentation<br>en eau potable",
      textIntro: "En raison de travaux sur le réseau de distribution, <strong>l’alimentation en eau potable sera suspendue</strong> le jour suivant :",
      labelSection: "Consignes",
      textBoxIntro: "Avant la suspension de l’eau potable, nous invitons les usagers à suivre les consignes suivantes :",
      box1: "Stocker de l’eau pour d’éventuelles urgences",
      box2: "Fermer les robinets d’entrée principaux",
      box3: "Débrancher les appareils alimentés en eau potable (lave-vaisselle, lave-linge, etc.)",
      disclaimer: "Après la suspension, ouvrez lentement les robinets principaux (baignoire, jardin, etc.), puis les robinets intérieurs. Cette procédure éliminera l’air et les éventuels troubles. Il est également conseillé de vérifier le filtre d’entrée (s’il y en a un) et les aérateurs de robinets (“Neoperl”).",
      thanks: "Nous remercions les usagers pour leur compréhension et leur collaboration."
    },
    de: {
      months: {
        gennaio: "Januar", febbraio: "Februar", marzo: "März", aprile: "April",
        maggio: "Mai", giugno: "Juni", luglio: "Juli", agosto: "August",
        settembre: "September", ottobre: "Oktober", novembre: "November", dicembre: "Dezember"
      },
      days: {
        LUNEDI: "MONTAG", MARTEDI: "DIENSTAG", MERCOLEDI: "MITTWOCH",
        GIOVEDI: "DONNERSTAG", VENERDI: "FREITAG", SABATO: "SAMSTAG", DOMENICA: "SONNTAG"
      },
      timePrefix: "von",
      timeTo: "bis",

      riservaPrefix: "allfällige Reserve",
      riservaFrom: "von",
      riservaTo: "bis",
      
      labelTitle: "Unterbrechung<br>der Trinkwasser-<br>versorgung",
      textIntro: "Aufgrund von Arbeiten am Verteilnetz wird die <strong>Trinkwasserversorgung am folgenden Tag unterbrochen</strong>:",
      labelSection: "Hinweise",
      textBoxIntro: "Vor der Unterbrechung des Trinkwassers wird die Bevölkerung gebeten, folgende Hinweise zu beachten:",
      box1: "Wasser für Notfälle bereitstellen",
      box2: "Hauptwasserhähne schließen",
      box3: "Geräte vom Trinkwassernetz trennen (Geschirrspüler, Waschmaschinen usw.)",
      disclaimer: "Nach der Unterbrechung langsam die Hauptventile (z. B. Badewanne, Garten) und danach die Innenarmaturen öffnen. So wird Luft und eventuelle Trübungen entfernt. Prüfen Sie auch den Eingangsfilter (falls vorhanden) und die Perlatoren („Neoperl“).",
      thanks: "Wir danken den Nutzern für das Verständnis und die Mitarbeit."
    },
    en: {
      months: {
        gennaio: "January", febbraio: "February", marzo: "March", aprile: "April",
        maggio: "May", giugno: "June", luglio: "July", agosto: "August",
        settembre: "September", ottobre: "October", novembre: "November", dicembre: "December"
      },
      days: {
        LUNEDI: "MONDAY", MARTEDI: "TUESDAY", MERCOLEDI: "WEDNESDAY",
        GIOVEDI: "THURSDAY", VENERDI: "FRIDAY", SABATO: "SATURDAY", DOMENICA: "SUNDAY"
      },
      timePrefix: "from",
      timeTo: "to",
      
      riservaPrefix: "possible reserve",
      riservaFrom: "from",
      riservaTo: "to",
      
      labelTitle: "Suspension<br>of drinking<br>water supply",
      textIntro: "Due to maintenance work on the distribution network, <strong>the supply of drinking water will be suspended</strong> on the following day:",
      labelSection: "Instructions",
      textBoxIntro: "Before the water suspension, users are kindly asked to follow these instructions:",
      box1: "Store water for possible emergencies",
      box2: "Close the main water intake valves",
      box3: "Disconnect devices using drinking water (dishwashers, washing machines, etc.)",
      disclaimer: "After the suspension, open the main valves slowly (e.g. bathtub, garden taps), then the internal faucets. This procedure will remove air and possible turbidity. Also check the inlet filter (if present) and tap aerators (“Neoperl”).",
      thanks: "We thank users for their understanding and cooperation."
    }
  };

  let rawIntestazione, rawGiorno, rawData, rawOrario, rawRiserva;
  function setLanguage(lang) {
    const t = translations[lang];
    const p = new URLSearchParams(window.location.search);
    const intestazione = p.get("intestazione") || rawIntestazione || "";
    const giorno = p.get("giorno") || rawGiorno || "";
    const data = p.get("data") || rawData || "";
    const orario = p.get("orario") || rawOrario || "";
    const riserva = p.get("riserva") || rawRiserva || "";
  
    // Salva i valori originali (una volta sola)
    if (!rawIntestazione) rawIntestazione = intestazione;
    if (!rawGiorno) rawGiorno = giorno;
    if (!rawData) rawData = data;
    if (!rawOrario) rawOrario = orario;
    if (!rawRiserva) rawRiserva = riserva;
  
    // Traduzione intestazione (solo mese)
    const matchInt = rawIntestazione.match(/^(.*?, \d{2}) (\w+) (\d{4})$/);
    const tradInt = matchInt ? `${matchInt[1]} ${t.months[matchInt[2]] || matchInt[2]} ${matchInt[3]}` : rawIntestazione;
    document.getElementById("intestazione").textContent = tradInt;
  
    // Traduzione orario
    const orarioMatch = rawOrario.match(/(\d{2}:\d{2}).+?(\d{2}:\d{2})/);
    const orarioTradotto = orarioMatch
      ? `${t.timePrefix} ${orarioMatch[1]} ${t.timeTo} ${orarioMatch[2]}`
      : rawOrario;
  
    // Traduzione giorno
    const normalize = s => s.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toUpperCase().trim();
    const giornoTradotto = t.days[normalize(rawGiorno)] || rawGiorno;
  
    // Composizione del riquadro
    let riquadroHTML = `
      <div class="date-line">${giornoTradotto}</div>
      <div class="date-line"><strong>${rawData}</strong></div>
      <div class="date-line">${orarioTradotto}</div>
    `;
    if (rawRiserva && rawRiserva.trim() !== "") {
      const ore = rawRiserva.match(/(\d{2}:\d{2}).+?(\d{2}:\d{2})/);
      const riservaTradotta = ore
        ? `${t.riservaPrefix} ${t.riservaFrom} ${ore[1]} ${t.riservaTo} ${ore[2]}`
        : rawRiserva;
    
      riquadroHTML += `<div class="date-line">${riservaTradotta}</div>`;
    }
    const riquadro = document.getElementById("riquadro");
    riquadro.innerHTML = riquadroHTML;
    riquadro.classList.toggle("compact", !rawRiserva);
    
    // Traduzioni fisse
    document.getElementById("label-title").innerHTML = t.labelTitle;
    document.getElementById("text-intro").innerHTML = t.textIntro;
    document.getElementById("label-section").textContent = t.labelSection;
    document.getElementById("text-box-intro").textContent = t.textBoxIntro;
    document.getElementById("box1").textContent = t.box1;
    document.getElementById("box2").textContent = t.box2;
    document.getElementById("box3").textContent = t.box3;
    document.getElementById("text-disclaimer").textContent = t.disclaimer;
    document.getElementById("text-thanks").textContent = t.thanks;
  }
  const urlParams = new URLSearchParams(window.location.search);
  const paramLang = urlParams.get("lang");
  const supportedLangs = ["it", "fr", "de", "en"];
  const browserLang = navigator.language.slice(0, 2);
  const initialLang = supportedLangs.includes(paramLang)
    ? paramLang
    : supportedLangs.includes(browserLang)
    ? browserLang
    : "it";

  setLanguage(initialLang);
</script>
</body>
</html>
